<!DOCTYPE html>
<html class="scroll-smooth">
  <head>
    <title>Routine Finders App Prototype</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;700;900&display=swap" rel="stylesheet">
    
    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>

    <style>
      :root {
        --app-bg: #0C0B12;
        --app-surface: #1B1A24;
        --app-surface-accent: #252433;
        --app-primary: #7C4DFF;
        --app-primary-glow: rgba(124, 77, 255, 0.4);
        --app-text-main: #FFFFFF;
        --app-text-dim: #8E8D9E;
        --app-border: rgba(255, 255, 255, 0.06);
      }

      body {
        background-color: var(--app-bg);
        color: var(--app-text-main);
        font-family: 'Pretendard', sans-serif;
        -webkit-tap-highlight-color: transparent;
      }

      .app-glass-card {
        background: var(--app-surface);
        border: 1px solid var(--app-border);
        border-radius: 32px;
      }

      .app-fab-gradient {
        background: linear-gradient(135deg, #7C4DFF 0%, #651FFF 100%);
        box-shadow: 0 10px 25px rgba(124, 77, 255, 0.4);
      }

      /* Transitions for Taps */
      .app-tap-active:active {
        transform: scale(0.96);
        transition: transform 0.1s ease;
      }
    </style>
  </head>

  <body class="min-h-screen" data-controller="proto-ui">
    <main data-controller="modal" class="w-full max-w-md mx-auto min-h-screen relative pb-40 px-4 shadow-2xl bg-[#0C0B12]">
      <%= yield %>
    </main>

    <!-- App Bottom Navigation Bar (Hidden if hide_nav is set) -->
    <% unless content_for?(:hide_nav) %>
      <nav class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[92%] max-w-sm h-20 bg-[#16151D]/80 backdrop-blur-3xl rounded-[32px] border border-white/10 flex items-center justify-around px-8 z-[100] shadow-[0_20px_50px_rgba(0,0,0,0.5)]">
      <%= link_to prototype_home_path, class: "flex items-center justify-center w-12 h-12 app-tap-active #{current_page?(prototype_home_path) ? 'text-indigo-400' : 'text-slate-600'}" do %>
        <span class="text-2xl">ğŸ </span>
      <% end %>

      <%= link_to prototype_explore_path, class: "flex items-center justify-center w-12 h-12 app-tap-active #{current_page?(prototype_explore_path) ? 'text-indigo-400' : 'text-slate-600'}" do %>
        <span class="text-2xl">ğŸ”</span>
      <% end %>

      <button type="button" onclick="document.getElementById('fab-menu-sheet').classList.remove('hidden')" class="w-16 h-16 app-fab-gradient rounded-full flex items-center justify-center -translate-y-6 shadow-2xl border-4 border-[#0C0B12] active:scale-90 transition-transform cursor-pointer">
        <span class="text-2xl text-white font-black">+</span>
      </button>

      <%= link_to prototype_synergy_path, class: "flex items-center justify-center w-12 h-12 app-tap-active #{current_page?(prototype_synergy_path) ? 'text-indigo-400' : 'text-slate-600'}" do %>
        <span class="text-2xl">âœ¨</span>
      <% end %>

      <%= link_to prototype_my_path, class: "flex items-center justify-center w-12 h-12 app-tap-active #{current_page?(prototype_my_path) ? 'text-indigo-400' : 'text-slate-600'}" do %>
        <span class="text-2xl">ğŸ‘¤</span>
      <% end %>
    </nav>
    <% end %>

    <!-- FAB Menu Sheet (Simple List Style) -->
    <div id="fab-menu-sheet" class="hidden fixed inset-0 z-[210]">
      <div onclick="document.getElementById('fab-menu-sheet').classList.add('hidden')" class="absolute inset-0 bg-black/80 backdrop-blur-md cursor-pointer transition-opacity"></div>
      <div class="absolute bottom-0 left-0 right-0 max-w-md mx-auto bg-[#1B1A24] rounded-t-[40px] p-8 pb-12 animate-slide-up border-t border-white/10 shadow-[0_-20px_60px_rgba(124,77,255,0.2)]">
        <div class="w-12 h-1.5 bg-white/10 rounded-full mx-auto mb-8"></div>
        <h3 class="text-xl font-black text-white mb-2 text-center">ìƒˆë¡œìš´ ì‹œì‘í•˜ê¸°</h3>
        <p class="text-xs font-bold text-indigo-400 mb-8 text-center uppercase tracking-widest leading-none">Create & Join</p>
        
        <div class="space-y-4">
          <!-- 1. Create Routine -->
          <a href="/prototype/routine_builder" class="block w-full p-5 rounded-3xl bg-white/5 border border-white/5 hover:bg-white/10 text-left group active:scale-[0.98] transition-all">
            <div class="flex items-center gap-4">
              <div class="w-12 h-12 rounded-2xl bg-[#0C0B12] flex items-center justify-center border border-white/10">
                <span class="text-2xl">ğŸ“</span>
              </div>
              <div class="flex-1">
                <p class="text-white font-bold text-base">ë‚´ ë£¨í‹´ ë§Œë“¤ê¸°</p>
                <p class="text-slate-500 text-xs font-bold mt-0.5">ë‚˜ë§Œì˜ ë°ì¼ë¦¬ ë£¨í‹´ ì„¤ì •</p>
              </div>
            </div>
          </a>

          <!-- 2. Create Challenge -->
          <a href="/prototype/challenge_builder" class="block w-full p-5 rounded-3xl bg-white/5 border border-white/5 hover:bg-white/10 text-left group active:scale-[0.98] transition-all">
            <div class="flex items-center gap-4">
              <div class="w-12 h-12 rounded-2xl bg-[#0C0B12] flex items-center justify-center border border-white/10">
                <span class="text-2xl">ğŸš©</span>
              </div>
              <div class="flex-1">
                <p class="text-white font-bold text-base">ì±Œë¦°ì§€ ë§Œë“¤ê¸°</p>
                <p class="text-slate-500 text-xs font-bold mt-0.5">í•¨ê»˜ ì„±ì¥í•˜ëŠ” ëª©í‘œ ë‹¬ì„±</p>
              </div>
            </div>
          </a>

          <!-- 3. Create Gathering -->
          <a href="/prototype/gathering_builder" class="block w-full p-5 rounded-3xl bg-white/5 border border-white/5 hover:bg-white/10 text-left group active:scale-[0.98] transition-all">
            <div class="flex items-center gap-4">
              <div class="w-12 h-12 rounded-2xl bg-[#0C0B12] flex items-center justify-center border border-white/10">
                <span class="text-2xl">ğŸ’¬</span>
              </div>
              <div class="flex-1">
                <p class="text-white font-bold text-base">ëª¨ì„ ë§Œë“¤ê¸°</p>
                <p class="text-slate-500 text-xs font-bold mt-0.5">ì·¨í–¥ê³¼ ê´€ì‹¬ì‚¬ ê³µìœ </p>
              </div>
            </div>
          </a>

          <!-- 4. RUFA Club Join (Highlight at Bottom) -->
          <a href="/routine_clubs/guide" class="block w-full p-5 rounded-3xl bg-gradient-to-r from-indigo-600 to-purple-600 text-left group active:scale-[0.98] transition-all shadow-lg shadow-indigo-600/20">
            <div class="flex items-center gap-4">
              <div class="w-12 h-12 rounded-2xl bg-white/20 flex items-center justify-center backdrop-blur-sm">
                <span class="text-2xl">âš¡</span>
              </div>
              <div class="flex-1">
                <p class="text-white font-black text-lg">ë£¨íŒŒ í´ëŸ½ ë©¤ë²„ì‹­ ê°€ì…</p>
                <p class="text-indigo-200 text-xs font-bold mt-0.5">ê²€ì¦ëœ ë¦¬ë”ë“¤ì˜ í”„ë¦¬ë¯¸ì—„ ì»¤ë®¤ë‹ˆí‹°</p>
              </div>
              <svg class="w-6 h-6 text-white opacity-50 group-hover:opacity-100 transition-opacity" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M9 5l7 7-7 7"/></svg>
            </div>
          </a>
        </div>

        <div class="mt-8 text-center">
            <button type="button" onclick="document.getElementById('fab-menu-sheet').classList.add('hidden')" class="px-8 py-3 rounded-full bg-white/5 text-slate-500 font-bold text-sm hover:bg-white/10 transition-colors">ë‹«ê¸°</button>
        </div>
      </div>
    </div>
  </body>
</html>
