<% 
  is_premium = @permission.is_premium_member?
  is_proto_style = local_assigns[:is_proto_style] || is_premium
%>

<div class="<%= is_proto_style ? "bg-[#1B1A24] border border-white/5" : "bg-white border border-slate-100" %> rounded-[40px] p-8 space-y-6">
  <div class="space-y-1">
    <h3 class="text-xs font-black <%= is_proto_style ? "text-indigo-400" : "text-indigo-600" %> uppercase tracking-[0.2em]"><%= is_premium ? "Live Competition" : "The Hall of Fame" %></h3>
    <p class="text-xl font-black italic"><%= is_premium ? "ì„±ì‹¤í•¨ ë¦¬ë”ë³´ë“œ" : "ê°€ì¥ ì„±ì‹¤í•œ ë£¨íŒŒë“¤" %></p>
  </div>

  <div class="space-y-3">
    <% if is_premium %>
      <!-- Personal Rank Bubble -->
      <div class="p-4 bg-indigo-600 rounded-3xl border border-white/10 shadow-xl mb-6">
         <div class="flex items-center justify-between">
           <div class="flex items-center gap-3">
             <div class="w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center text-xl">ğŸ”±</div>
             <div>
               <p class="text-[9px] font-black text-white/50 uppercase tracking-widest">My Current Rank</p>
               <p class="text-base font-black text-white">ìƒìœ„ <%= rand(1..5) %>% <span class="text-xs opacity-60 ml-1">íŒŒì¸ë”</span></p>
             </div>
           </div>
           <svg class="w-4 h-4 text-white/30" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M13 7l5 5m0 0l-5 5m5-5H6"/></svg>
         </div>
      </div>
    <% end %>

    <!-- Top Rankings List -->
    <% (@top_rankings || []).each_with_index do |item, idx| %>
      <div class="flex items-center justify-between p-4 <%= is_premium ? "bg-white/5" : "bg-slate-50" %> rounded-2xl border border-white/5">
        <div class="flex items-center gap-4">
          <div class="w-8 h-8 rounded-lg <%= idx == 0 ? "bg-amber-400 text-black" : "bg-slate-200 text-slate-500" %> flex items-center justify-center font-black text-xs">
            <%= idx + 1 %>
          </div>
          <%= rufa_avatar_tag(item[:user], size: :sm) %>
          <span class="text-xs font-black"><%= item[:user].nickname %></span>
        </div>
        <div class="flex items-center gap-1.5">
           <span class="text-[10px] font-black <%= is_premium ? "text-indigo-300" : "text-indigo-600" %>"><%= item[:score] %></span>
           <span class="text-[8px] font-bold opacity-30">PTS</span>
        </div>
      </div>
    <% end %>

    <% unless is_premium %>
      <%= link_to routine_clubs_path, class: "block w-full py-4 text-center border-2 border-dashed border-slate-100 rounded-2xl text-[10px] font-black text-slate-400 hover:text-indigo-600 hover:border-indigo-100 transition-all" do %>
        ì „ì²´ ë­í‚¹ ë„ì „í•˜ê¸° ğŸ”±
      <% end %>
    <% end %>
  </div>
</div>
