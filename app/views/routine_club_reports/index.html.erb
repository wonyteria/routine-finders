<%# PROTOTYPE STYLE: My Report Archive %>
<div class="flex flex-col bg-[#0C0B12] text-white min-h-screen relative -mx-4 -mt-8 pb-32">
  <!-- 1. Header -->
  <header class="sticky top-0 z-50 px-6 py-5 bg-[#0C0B12]/80 backdrop-blur-md flex items-center gap-4">
    <%= link_to prototype_my_path, class: "w-10 h-10 -ml-2 rounded-full flex items-center justify-center text-slate-400 active:scale-95 transition-all hover:bg-white/5" do %>
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15 19l-7-7 7-7"/></svg>
    <% end %>
    <div>
      <h1 class="text-xl font-black text-white italic tracking-tight">Report Vault</h1>
      <p class="text-[10px] font-bold text-slate-500 uppercase tracking-widest mt-0.5">My Growth History</p>
    </div>
  </header>

  <!-- 2. Empty State or List -->
  <div class="px-6 mt-4 space-y-4">
    <% if @reports.any? %>
      <div class="flex items-center justify-between px-1 mb-2">
        <span class="text-[10px] font-bold text-slate-500 uppercase tracking-wider">Total <%= @reports.count %> Reports</span>
      </div>

      <div class="space-y-4 relative ml-2">
         <!-- Timeline Line -->
        <div class="absolute left-[19px] top-2 bottom-4 w-[2px] bg-white/5"></div>

        <% @reports.order(start_date: :desc).each do |report| %>
          <%= link_to routine_club_report_path(report), class: "block group relative pl-12" do %>
            <!-- Timeline Dot -->
            <div class="absolute left-0 top-1.5 w-[10px] h-[10px] rounded-full border-2 border-[#0C0B12] z-10 <%= report.report_type_monthly? ? 'bg-purple-500 shadow-[0_0_10px_rgba(168,85,247,0.5)]' : 'bg-indigo-500' %> group-hover:scale-125 transition-transform"></div>

            <div class="app-glass-card p-4 border-white/5 hover:border-indigo-500/30 hover:bg-white/[0.04] transition-all">
              <div class="flex justify-between items-start mb-2">
                <div class="flex items-center gap-2">
                   <span class="text-[10px] font-black <%= report.report_type_monthly? ? 'text-purple-400' : 'text-indigo-400' %> uppercase tracking-wider">
                     <%= report.report_type %>
                   </span>
                   <span class="text-[10px] text-slate-500">•</span>
                   <span class="text-[10px] text-slate-400 font-medium numbers">
                     <%= report.start_date.strftime("%Y.%m.%d") %>
                   </span>
                </div>
                <!-- Rate Badge -->
                <div class="flex items-center gap-1 bg-white/5 px-2 py-1 rounded-lg">
                  <span class="text-[9px] text-slate-400 uppercase font-bold">Achieve</span>
                  <span class="text-xs font-black <%= report.achievement_rate >= 80 ? 'text-emerald-400' : 'text-slate-200' %>">
                    <%= report.achievement_rate %>%
                  </span>
                </div>
              </div>
              
              <h3 class="text-sm font-bold text-white mb-1 truncate">"<%= report.identity_title %>"</h3>
              <p class="text-[11px] text-slate-500 line-clamp-2 leading-relaxed">
                <%= report.summary %>
              </p>
            </div>
          <% end %>
        <% end %>
      </div>

    <% else %>
      <div class="py-20 text-center app-glass-card border-white/5 border-dashed flex flex-col items-center justify-center mt-10">
        <div class="w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-4 text-2xl animate-pulse">
          📂
        </div>
        <p class="text-xs font-bold text-slate-400">보관된 리포트가 없습니다.</p>
        <p class="text-[10px] font-medium text-slate-600 mt-2 max-w-[200px] leading-relaxed">
          루파 클럽 활동을 통해<br/>첫 번째 리포트를 생성해보세요.
        </p>
      </div>
    <% end %>
  </div>
</div>
