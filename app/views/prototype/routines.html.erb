<div class="min-h-screen bg-[#0C0B12] text-slate-100 px-5 pb-32" data-controller="proto-ui">
  <!-- Decorative Glows -->
  <div class="fixed top-0 right-0 w-[300px] h-[300px] bg-indigo-600/10 blur-[100px] rounded-full pointer-events-none"></div>
  <div class="fixed bottom-0 left-0 w-[400px] h-[400px] bg-purple-600/5 blur-[120px] rounded-full pointer-events-none"></div>

  <!-- Header -->
  <header class="relative z-10 mb-8 flex items-center justify-between">
    <div class="flex items-center gap-3">
      <%= link_to prototype_home_path, class: "w-10 h-10 rounded-2xl bg-white/5 border border-white/10 flex items-center justify-center text-slate-400 active:scale-90 transition-all" do %>
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15 19l-7-7 7-7"/></svg>
      <% end %>
      <div>
        <h1 class="text-xl font-black tracking-tight text-white leading-none">ë£¨í‹´ ê´€ë¦¬</h1>
        <p class="text-[10px] text-slate-500 font-bold mt-1 uppercase tracking-widest">Master your Daily building</p>
      </div>
    </div>
    <a href="<%= prototype_routine_builder_path %>" 
       class="w-10 h-10 rounded-2xl bg-indigo-500 flex items-center justify-center shadow-lg shadow-indigo-500/30 active:scale-90 transition-all">
      <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M12 4v16m8-8H4"/></svg>
    </a>
  </header>

  <!-- Filter -->
  <div class="relative z-10 mb-8 flex gap-2 overflow-x-auto hide-scrollbar">
    <button class="px-5 py-2.5 rounded-xl bg-white text-black text-[11px] font-black whitespace-nowrap shadow-xl shadow-white/10">ì „ì²´</button>
    <% ["ê±´ê°•", "í•™ìŠµ", "ë§ˆì¸ë“œ", "ë¼ì´í”„"].each do |cat| %>
      <button class="px-5 py-2.5 rounded-xl bg-white/5 border border-white/10 text-slate-400 text-[11px] font-black whitespace-nowrap hover:bg-white/10 transition-colors"><%= cat %></button>
    <% end %>
  </div>

  <!-- Routine List -->
  <main class="relative z-10 space-y-3">
    <% if @routines.any? %>
      <% @routines.each do |routine| %>
        <div id="routine_<%= routine.id %>_card" class="group relative app-glass-card border-white/5 p-4 flex items-center justify-between gap-4 active:scale-[0.99] transition-all duration-300">
          <div class="flex items-center gap-4 min-w-0 flex-1">
            <div class="w-11 h-11 rounded-2xl bg-gradient-to-br from-white/10 to-transparent border border-white/10 flex items-center justify-center text-xl shrink-0">
              <%= routine.icon.presence || "âœ¨" %>
            </div>
            <div class="min-w-0 flex-1">
              <h3 class="font-bold text-base text-white tracking-tight leading-tight truncate pr-2"><%= routine.title %></h3>
              <div class="flex items-center gap-2 mt-1.5 truncate">
                <span class="text-[9px] font-black px-1.5 py-0.5 bg-indigo-500/20 text-indigo-300 rounded-lg border border-indigo-500/10">
                  ğŸ”¥ <%= routine.current_streak %>ì¼
                </span>
                <span class="text-[10px] font-bold text-slate-500 truncate">
                  <%= (routine.days || []).map { |d| ["ì¼", "ì›”", "í™”", "ìˆ˜", "ëª©", "ê¸ˆ", "í† "][d.to_i] }.join(', ') %>
                </span>
              </div>
            </div>
          </div>

          <div class="flex items-center gap-1.5 shrink-0">
            <%# Redirect to new Editor Page instead of modal %>
            <%= link_to prototype_routine_editor_path(routine), 
                        class: "w-9 h-9 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center text-slate-400 hover:text-indigo-400 hover:bg-indigo-500/10 transition-all" do %>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/></svg>
            <% end %>
            
            <%= button_to personal_routine_path(routine, source: 'prototype'), method: :delete, 
                          class: "w-9 h-9 rounded-xl bg-rose-500/5 border border-rose-500/10 flex items-center justify-center text-rose-500/40 hover:text-rose-500 transition-all cursor-pointer",
                          form: { data: { turbo_confirm: "ì •ë§ ì‚­ì œí• ê¹Œìš”?\nì‚­ì œëœ ë£¨í‹´ ë°ì´í„°ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤." } } do %>
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>
            <% end %>
          </div>
        </div>
      <% end %>
    <% else %>
      <div class="py-20 text-center">
        <div class="w-16 h-16 bg-white/5 rounded-3xl flex items-center justify-center text-4xl mx-auto mb-6 shadow-inner">ğŸŒ±</div>
        <p class="text-slate-600 font-bold text-sm">ë“±ë¡ëœ ë£¨í‹´ì´ ì—†ìŠµë‹ˆë‹¤</p>
        <a href="<%= prototype_routine_builder_path %>" 
           class="mt-6 inline-block px-8 py-3.5 rounded-2xl bg-indigo-500 text-white font-black text-sm shadow-xl shadow-indigo-500/20 active:scale-95 transition-all">
          ì²« ë£¨í‹´ ë§Œë“¤ê¸°
        </a>
      </div>
    <% end %>
  </main>
</div>
